---
import RootLayout from '../../layouts/RootLayout.astro';
import TrackCaseStudy from '../../components/react/TrackCaseStudy';
import { apiUrl } from '../../data/variables';

export async function getStaticPaths() {
	try {
		const tracks = await fetch(`/api/fetch-music`).then((res) => res.json());

		return tracks.map((track) => ({
			params: { id: track.id },
			props: { track },
		}));
	} catch (error) {
		console.error('Error generating static paths:', error);
		return [];
	}
}

const { track } = Astro.props;
---

<RootLayout title={`${track.name} - Case Study - Shawn Papineau`}>
	<main
		class="min-h-screen bg-gradient-to-br from-moody-900 via-moody-800 to-moody-900"
	>
		<TrackCaseStudy track={track} client:load />
	</main>
</RootLayout>
