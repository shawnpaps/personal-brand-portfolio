---
import { getPhotos, type NotionMedia } from "../lib/notion";

// Fetch photos at build time
let photos: NotionMedia[] = [];
try {
	photos = await getPhotos();
	// Limit to 7 photos for the carousel
	photos = photos.slice(0, 7);
} catch (e) {
	console.error("Failed to fetch photos for carousel:", e);
}
---

<div class="carousel carousel-center rounded-box">
	{
		photos.length > 0 ? (
			photos.map((photo) => (
				<div class="carousel-item">
					<img
						src={photo.url}
						alt={photo.title || "captured moment"}
						loading="lazy"
					/>
				</div>
			))
		) : (
			<>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1559703248-dcaaec9fab78.webp"
						alt="urban dusk — where light falls through steel"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1565098772267-60af42b81ef2.webp"
						alt="golden hour captured — light that lingers"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1572635148818-ef6fd45eb394.webp"
						alt="between takes — the quiet before action"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1494253109108-2e30c049369b.webp"
						alt="grain and texture — film that breathes"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1550258987-190a2d41a8ba.webp"
						alt="crafted detail — every surface tells"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1559181567-c3190ca9959b.webp"
						alt="water at dusk — where sky meets surface"
					/>
				</div>
				<div class="carousel-item">
					<img
						src="https://img.daisyui.com/images/stock/photo-1601004890684-d8cbf643f5f2.webp"
						alt="neon after dark — color bleeds through shadow"
					/>
				</div>
			</>
		)
	}
</div>
