---
import Card from "../Card.astro";
import Carousel from "../Carousel.astro";
import DropdownCards from "../DropdownCards.astro";
import { getPhotos, type NotionMedia } from "../../lib/notion";

// Fetch a photo for the card
let featuredPhoto: NotionMedia | null = null;
try {
	const photos = await getPhotos();
	// Get the first photo, or use the existing image as fallback
	featuredPhoto = photos.length > 0 ? photos[0] : null;
} catch (e) {
	console.error("Failed to fetch photo for About section:", e);
}
---

<section class="relative py-24 px-6 sm:px-10 lg:px-14 overflow-hidden">
	<div class="relative max-w-6xl mx-auto text-white space-y-12">
		<!-- intro copy -->
		<div class="space-y-6 text-center">
			<h2
				class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight"
			>
				Stories that breathe.<br />Frames that linger.<br />Systems that
				flow.
			</h2>
			<p class="text-lg sm:text-xl text-white/70 max-w-3xl mx-auto">
				I'm Paps — the eye behind sudo.create. I chase light through
				lenses, shape emotion through sound, and build the systems that
				keep stories alive. Photography. Film. Audio. Code. All driven
				by feeling, refined by craft.
			</p>
		</div>
		<div
			class="flex flex-col sm:flex-row items-center justify-center gap-4 text-lg text-white/70"
		>
			<p class="max-w-xl">
				I built sudo.create because too many stories were dying between
				capture and distribution — beautiful work trapped in
				<span
					class="mx-1 bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent font-semibold"
					>broken workflows</span
				>.
			</p>
			<span class="text-3xl">⸻</span>
			<p class="max-w-xl">
				You shouldn't have to choose. Your
				<span
					class="mx-1 bg-gradient-to-r from-orange-400 to-rose-500 bg-clip-text text-transparent font-semibold"
					>vision deserves the flow to sustain it</span
				>.
			</p>
		</div>

		<!-- Card and Dropdown Section -->
		<div
			class="flex items-start justify-between flex-col md:flex-row gap-6"
		>
			<div class="max-w-2xl w-full space-y-2">
				<DropdownCards />
				<a
					href="/contact"
					class="btn btn-primary rounded-full mt-8 w-full"
					>Let's build your flow.</a
				>
			</div>
			<div class="h-full w-full">
				<Card>
					<img
						src={featuredPhoto?.url ||
							"/images/equature_landing.png"}
						alt={featuredPhoto?.title || "Equature landing page"}
						class="rounded-xl shadow-lg shadow-black/20"
					/>
				</Card>
			</div>
		</div>
	</div>
</section>

<!-- screenshot gallery -->
<div class="space-y-10 hidden">
	<div
		class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-6"
	>
		<div>
			<p class="text-sm uppercase tracking-[0.3em] text-white/60">
				Recent captures
			</p>
			<h3 class="text-3xl sm:text-4xl font-semibold">
				Work that stops the scroll.
			</h3>
		</div>
		<p class="text-white/60 max-w-2xl">
			Real stories. Living moments. The kind of work that makes people
			pause, feel something, and share it with those who understand.
		</p>
	</div>
	<Carousel />
</div>
